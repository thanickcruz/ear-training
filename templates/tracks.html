<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guess the Song's Key</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>Guess the Key!</h1>
    <h3>Listen to the track and guess the key:</h3>

    <iframe style="border-radius:12px" src="https://open.spotify.com/embed/track/{{ track_id }}?utm_source=generator&theme=0" width="87%" height="352" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
    <br><br>

    <form action="{{ url_for('guess_track') }}" method="post">
        <input type="hidden" name="track_id" value="{{ track_id }}">
        <input type="hidden" name="key_signature" value="{{ key_signature }}">

        <!-- Row for Major chords -->
        <h3>Major Chords</h3>
        <div class="button-row">
            <button type="submit" name="user_guess" value="C">C</button>
            <button type="submit" name="user_guess" value="C#">C#</button>
            <button type="submit" name="user_guess" value="D">D</button>
            <button type="submit" name="user_guess" value="D#">D# / Eb</button>
            <button type="submit" name="user_guess" value="E">E</button>
            <button type="submit" name="user_guess" value="F">F</button>
            <button type="submit" name="user_guess" value="F#">F# / Gb</button>
            <button type="submit" name="user_guess" value="G">G</button>
            <button type="submit" name="user_guess" value="G#">G# / Ab</button>
            <button type="submit" name="user_guess" value="A">A</button>
            <button type="submit" name="user_guess" value="A#">A# / Bb</button>
            <button type="submit" name="user_guess" value="B">B</button>
        </div>

        <!-- Row for Minor chords -->
        <h3>Minor Chords</h3>
        <div class="button-row">
            <button type="submit" name="user_guess" value="Cm">Cm</button>
            <button type="submit" name="user_guess" value="C#m">C#m</button>
            <button type="submit" name="user_guess" value="Dm">Dm</button>
            <button type="submit" name="user_guess" value="D#m">D#m / Ebm</button>
            <button type="submit" name="user_guess" value="Em">Em</button>
            <button type="submit" name="user_guess" value="Fm">Fm</button>
            <button type="submit" name="user_guess" value="F#m">F#m / Gbm</button>
            <button type="submit" name="user_guess" value="Gm">Gm</button>
            <button type="submit" name="user_guess" value="G#m">G#m / Abm</button>
            <button type="submit" name="user_guess" value="Am">Am</button>
            <button type="submit" name="user_guess" value="A#m">A#m / Bbm</button>
            <button type="submit" name="user_guess" value="Bm">Bm</button>
        </div>
    </form>

    {% if score %}
    <div class="score">
        <p>Your Score: {{ score }}</p>
    </div>
    {% endif %}

    {% if result %}
    <div id="result" class="result">
        <p id="result-text" style="color: {{ result_color }}">{{ result }}</p>
        <a href="{{ url_for('next_track_sample') }}">
            <button>Next</button>
        </a>
    </div>
    {% endif %}

    <a href="{{ url_for('track_log') }}">View Results</a>
</body>
</html>

